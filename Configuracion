1. Actualizar las listas de paquetes e instalar las actualizaciones disponibles
Lo primero es asegurarse de que tu sistema esté completamente actualizado. Ejecuta los siguientes comandos para actualizar las listas de paquetes e instalar las actualizaciones:


sudo apt update
sudo apt upgrade -y

2. Instalar los requisitos previos del PPA
Para trabajar con paquetes de un PPA (repositorios personales de aplicaciones), necesitamos instalar un paquete adicional. Este paquete es software-properties-common, que permite gestionar las fuentes de software adicionales. Instálalo con:


sudo apt install software-properties-common -y

3. Agregar el PPA para PHP (Ondřej Surý's PHP PPA)
El siguiente paso es agregar el repositorio que contiene las últimas versiones de PHP. El PPA de Ondřej Surý es uno de los más utilizados para obtener versiones recientes de PHP en distribuciones basadas en Debian/Ubuntu.

Ejecuta el siguiente comando para agregar el PPA de PHP:


LC_ALL=C.UTF-8 sudo add-apt-repository ppa:ondrej/php -y

Este comando agrega el PPA a las fuentes de software de tu sistema.

4. Actualizar los repositorios
Una vez que se ha agregado el PPA, debes actualizar nuevamente los repositorios para que el sistema reconozca los paquetes disponibles en este nuevo repositorio:


sudo apt update

5. Instalar PHP 7.4 y las extensiones necesarias
Ahora que hemos configurado los repositorios, podemos proceder con la instalación de PHP 7.4 y las extensiones necesarias para que funcione correctamente en el servidor web Apache.

Instalar PHP 7.4:

sudo apt install php7.4 -y

Instalar el módulo de PHP para Apache (mod_php):

sudo apt install -y php libapache2-mod-php7.4

Instalar las extensiones de PHP 7.4 necesarias para diversas funciones:

sudo apt install -y php7.4-fpm php7.4-common php7.4-mbstring php7.4-xmlrpc php7.4-soap php7.4-gd php7.4-xml php7.4-intl php7.4-mysql php7.4-cli php7.4-ldap php7.4-zip php7.4-curl

Estas extensiones cubren una variedad de funcionalidades útiles, como soporte para bases de datos MySQL, procesamiento de imágenes, manejo de XML, etc.

6. Seleccionar la versión de PHP por defecto
Si tienes varias versiones de PHP instaladas en tu servidor, puedes seleccionar cuál quieres usar como la versión predeterminada. Para ello, usa el siguiente comando:

sudo update-alternatives --config php

Este comando te presentará una lista de versiones de PHP disponibles en tu sistema. Ingresa el número correspondiente a la versión de PHP que quieres establecer como predeterminada (en este caso, PHP 7.4).

7. Activar los módulos de Apache necesarios para PHP 7.4
Para que Apache maneje correctamente las solicitudes de PHP 7.4, debes habilitar algunos módulos específicos y configuraciones. Los módulos necesarios son:

Activar los módulos proxy_fcgi y setenvif:

sudo a2enmod proxy_fcgi setenvif
Activar la configuración de php7.4-fpm (FastCGI Process Manager):

sudo a2enconf php7.4-fpm

8. Reiniciar Apache2
Después de realizar todos los cambios, es necesario reiniciar Apache para que los nuevos módulos y configuraciones surtan efecto. Ejecuta el siguiente comando para reiniciar Apache:

sudo service apache2 restart

